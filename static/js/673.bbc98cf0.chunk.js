"use strict";(self.webpackChunkbattery_fly_admin=self.webpackChunkbattery_fly_admin||[]).push([[673],{2673:function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var r=n(9439),i=n(5861),o=n(4942),a=n(1413),c=n(3433),l=n(4687),u=n.n(l),s=n(2791),d=n(697),f=n(2419),m=n(1286),v=n(503),x=n(8763),h=n(9823),p=n(5936),g=n(4265),Z=n(1973),w=n(4515),j=n(2181),y=n(4294),C=n(5003),b=n(4420),M=n(3338),k=function(e){return e.hero.items},E=n(3329),A=function(e){var t=e.setRows,n=e.setRowModesModel;return(0,E.jsx)(g.D,{children:(0,E.jsx)(y.Z,{color:"primary",startIcon:(0,E.jsx)(f.Z,{}),onClick:function(){var e=(0,C.kb)();t((function(t){return[].concat((0,c.Z)(t),[{id:e,image:"",text:"",isNew:!0}])})),n((function(t){return(0,a.Z)((0,a.Z)({},t),{},(0,o.Z)({},e,{mode:p.se.Edit,fieldToFocus:"text"}))}))},children:"Add record"})})},F=function(){var e=(0,b.I0)(),t=(0,b.v9)(k);(0,s.useEffect)((function(){var t=function(){var t=(0,i.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{e((0,M.Qu)())}catch(n){console.log("error",n.message)}case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e]);var n=t.map((function(e){return{id:e._id,text:e.text,image:e.image}})),c=(0,s.useState)({}),l=(0,r.Z)(c,2),f=l[0],g=l[1],y=function(e){return function(){g((0,a.Z)((0,a.Z)({},f),{},(0,o.Z)({},e,{mode:p.se.View,ignoreModifications:!0})))}},C=function(e){return function(){g((0,a.Z)((0,a.Z)({},f),{},(0,o.Z)({},e,{mode:p.se.Edit})))}},F=(0,s.useState)(""),N=(0,r.Z)(F,2),R=N[0],S=N[1],z=(0,s.useState)(""),D=(0,r.Z)(z,2),P=D[0],V=D[1],_=function(e){return function(t){t.preventDefault();var n=t.target.files[0];if(n){var r=new FileReader;r.onloadend=function(){S((0,o.Z)({},e,{url:r.result,file:n}))},r.readAsDataURL(n)}}},I=function(t){return(0,i.Z)(u().mark((function r(){var i,c,l;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return g((0,a.Z)((0,a.Z)({},f),{},(0,o.Z)({},t,{mode:p.se.View}))),c=new FormData,null!==(i=R[t])&&void 0!==i&&i.file&&(console.log(null===(l=R[t])||void 0===l?void 0:l.file),c.append("image",R[t].file)),c.append("text",P[t]||n.find((function(e){return e.id===t})).text),r.prev=4,r.next=7,e((0,M.mJ)({id:t,formData:c}));case 7:console.log("ura"),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(4),console.error("jopa",r.t0.message);case 13:case"end":return r.stop()}}),r,null,[[4,10]])})))},H=function(e){return function(t){var n=t.target.value;V((function(t){return(0,a.Z)((0,a.Z)({},t),{},(0,o.Z)({},e,n))}))}},L=[{field:"image",headerName:"Image",type:"image",renderCell:function(e){var t,n=e.row.id,r=(null===(t=R[n])||void 0===t?void 0:t.url)||e.value;return(0,E.jsx)("form",{children:(0,E.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:5,objectFit:"contain",margin:0},children:[(0,E.jsx)("img",{src:r,alt:"Preview",style:{maxWidth:"200px",height:100}}),(0,E.jsx)("input",{type:"file",accept:"image/*",onChange:_(n)})]})})},width:500,align:"center",headerAlign:"center",editable:!1},{field:"text",headerName:"Text",type:"text",width:670,align:"center",headerAlign:"center",editable:!0,renderCell:function(e){var t,n=e.row.id;return(null===(t=f[n])||void 0===t?void 0:t.mode)===p.se.Edit?(0,E.jsx)("input",{type:"text",defaultValue:e.value,onChange:H(n)}):e.value}},{field:"actions",type:"actions",width:100,align:"center",headerAlign:"center",headerName:"Actions",cellClassName:"actions",getActions:function(t){var n,r=t.id;return(null===(n=f[r])||void 0===n?void 0:n.mode)===p.se.Edit?[(0,E.jsx)(w.u,{icon:(0,E.jsx)(x.Z,{}),label:"Save",sx:{color:"primary.main"},onClick:I(r)}),(0,E.jsx)(w.u,{icon:(0,E.jsx)(h.Z,{}),label:"Cancel",className:"textPrimary",onClick:y(r),color:"inherit"})]:[(0,E.jsx)(w.u,{icon:(0,E.jsx)(m.Z,{}),label:"Edit",className:"textPrimary",onClick:C(r),color:"inherit"}),(0,E.jsx)(w.u,{icon:(0,E.jsx)(v.Z,{}),label:"Delete",onClick:function(){return function(t){e((0,M.p7)(t))}(r)},color:"inherit"})]}}];return(0,E.jsx)(d.Z,{sx:{height:"auto",width:"100%","& .actions":{color:"text.secondary"},"& .textPrimary":{color:"text.primary"}},children:(0,E.jsx)(j._,{rows:n,columns:L,editMode:"row",rowModesModel:f,onRowModesModelChange:function(e){g(e)},onRowEditStop:function(e,t){e.reason===Z.U.rowFocusOut&&(t.defaultMuiPrevented=!0)},disableColumnMenu:!0,disableColumnResize:!0,disableColumnSorting:!0,hideFooter:!0,hideFooterPagination:!0,rowHeight:100,slots:{toolbar:A}})})},N=function(){return(0,E.jsx)(F,{})}},9823:function(e,t,n){var r=n(4836);t.Z=void 0;var i=r(n(5649)),o=n(3329);t.Z=(0,i.default)((0,o.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},1286:function(e,t,n){var r=n(4836);t.Z=void 0;var i=r(n(5649)),o=n(3329);t.Z=(0,i.default)((0,o.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},8763:function(e,t,n){var r=n(4836);t.Z=void 0;var i=r(n(5649)),o=n(3329);t.Z=(0,i.default)((0,o.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save")}}]);
//# sourceMappingURL=673.bbc98cf0.chunk.js.map