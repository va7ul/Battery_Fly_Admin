"use strict";(self.webpackChunkbattery_fly_admin=self.webpackChunkbattery_fly_admin||[]).push([[630],{7630:function(e,n,t){t.r(n),t.d(n,{default:function(){return P}});var i,o=t(3433),r=t(4942),a=t(1413),l=t(9439),u=t(2791),s=t(697),c=t(2419),d=t(8471),f=t(503),m=t(7772),g=t(1598),x=t(168),h=t(8789).ZP.input(i||(i=(0,x.Z)(["\n  width: 100%;\n  height: 100%;\n  background: inherit;\n  border: none;\n  outline: none;\n"]))),v=t(1973),p=t(5936),w=t(4515),Z=t(2181),y=t(4294),j=t(5003),b=t(4420),C=t(3338),k=function(e){return e.hero.items},M=function(e){return e.hero.isLoading},R=t(3329),S=function(){var e=(0,b.I0)(),n=(0,b.v9)(k),t=(0,u.useState)({}),i=(0,l.Z)(t,2),x=i[0],M=i[1],S=n.map((function(e){return{id:e._id,image:e.image,text:e.text}})),E=(0,u.useState)(S),P=(0,l.Z)(E,2),N=P[0],D=P[1],F=function(n){return function(){e((0,C.XS)(n))}},_=function(e){return function(){M((0,a.Z)((0,a.Z)({},x),{},(0,r.Z)({},e,{mode:p.se.View,ignoreModifications:!0})))}},A=function(e){return function(){M((0,a.Z)((0,a.Z)({},x),{},(0,r.Z)({},e,{mode:p.se.Edit})))}},I=(0,u.useState)(""),L=(0,l.Z)(I,2),V=L[0],H=L[1],K=(0,u.useState)(""),U=(0,l.Z)(K,2),W=U[0],z=U[1],O=function(e){return function(n){n.preventDefault();var t=n.target.files[0];if(t){var i=new FileReader;i.onloadend=function(){H((0,r.Z)({},e,{url:i.result,file:t}))},i.readAsDataURL(t)}}},T=function(n){return function(){var t;M((0,a.Z)((0,a.Z)({},x),{},(0,r.Z)({},n,{mode:p.se.View})));var i=N.find((function(e){return!0===e.isNew&&""===e.text})),o=new FormData;null!==(t=V[n])&&void 0!==t&&t.file&&o.append("image",V[n].file),o.append("text",W[n]||N.find((function(e){return e.id===n})).text);try{e(i?(0,C.gM)(o):(0,C.Ww)({id:n,formData:o}))}catch(l){console.error("error",l.message)}}},X=function(e){return function(n){var t=n.target.value;z((function(n){return(0,a.Z)((0,a.Z)({},n),{},(0,r.Z)({},e,t))}))}},q=[{field:"image",headerName:"\u0424\u043e\u0442\u043e",type:"image",renderCell:function(e){var n,t,i=e.row.id,o=(null===(n=V[i])||void 0===n?void 0:n.url)||e.value,r=(null===(t=x[i])||void 0===t?void 0:t.mode)===p.se.Edit;return(0,R.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:5,objectFit:"contain",margin:0},children:[(0,R.jsx)("img",{src:o,alt:"Preview",style:{maxWidth:"200px",height:100}}),(0,R.jsx)("input",{type:"file",accept:"image/*",onChange:O(i),style:{display:r?"inline-block":"none"}})]})},width:450,align:"center",headerAlign:"center",editable:!1},{field:"text",headerName:"\u0422\u0435\u043a\u0441\u0442",type:"text",width:725,align:"center",headerAlign:"center",editable:!1,renderCell:function(e){var n,t=e.row.id;return(null===(n=x[t])||void 0===n?void 0:n.mode)===p.se.Edit?(0,R.jsx)(h,{type:"text",defaultValue:e.value,onChange:X(t),onKeyDown:function(e){return e.stopPropagation()}}):e.value}},{field:"actions",type:"actions",width:100,align:"center",headerAlign:"center",cellClassName:"actions",getActions:function(e){var n,t=e.id;return(null===(n=x[t])||void 0===n?void 0:n.mode)===p.se.Edit?[(0,R.jsx)(w.u,{icon:(0,R.jsx)(m.Z,{}),label:"Save",sx:{color:"primary.main"},onClick:T(t)}),(0,R.jsx)(w.u,{icon:(0,R.jsx)(g.Z,{}),label:"Cancel",className:"textPrimary",onClick:_(t),color:"inherit"})]:[(0,R.jsx)(w.u,{icon:(0,R.jsx)(d.Z,{}),label:"Edit",className:"textPrimary",onClick:A(t),color:"inherit"}),(0,R.jsx)(w.u,{icon:(0,R.jsx)(f.Z,{}),label:"Delete",onClick:F(t),color:"inherit"})]}}];return(0,R.jsx)(s.Z,{sx:{height:"auto",width:"100%","& .actions":{color:"text.primary"},"& .textPrimary":{color:"text.primary"}},children:(0,R.jsx)(Z._,{rows:N,columns:q,editMode:"row",rowModesModel:x,onRowModesModelChange:function(e){M(e)},onRowEditStop:function(e,n){e.reason===v.U.rowFocusOut&&(n.defaultMuiPrevented=!0)},disableColumnMenu:!0,disableColumnResize:!0,disableColumnSorting:!0,rowHeight:100,rowSelection:!1,autoHeight:!0,slots:{pagination:function(e){var n=e.setRows,t=e.setRowModesModel;return(0,R.jsx)(y.Z,{variant:"contained",startIcon:(0,R.jsx)(c.Z,{}),onClick:function(){var e=(0,j.kb)();n((function(n){return[].concat((0,o.Z)(n),[{id:e,image:"",text:"",isNew:!0}])})),t((function(n){return(0,a.Z)((0,a.Z)({},n),{},(0,r.Z)({},e,{mode:p.se.Edit,fieldToFocus:"text"}))}))},sx:{marginRight:"auto",marginLeft:"10px","&:hover":{backgroundColor:"primary.main"}},children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0431\u0430\u043d\u0435\u0440"})}},slotProps:{pagination:{setRows:D,setRowModesModel:M}}})})},E=t(5757),P=function(){var e=(0,b.I0)(),n=(0,b.v9)(M);return(0,u.useEffect)((function(){e((0,C.cK)())}),[e]),(0,R.jsx)(R.Fragment,{children:n?(0,R.jsx)(E.p,{}):(0,R.jsx)(S,{})})}}}]);
//# sourceMappingURL=630.c83aaee1.chunk.js.map