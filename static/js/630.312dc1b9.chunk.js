"use strict";(self.webpackChunkbattery_fly_admin=self.webpackChunkbattery_fly_admin||[]).push([[630],{7630:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var i,o=n(3433),r=n(4942),a=n(1413),l=n(5861),u=n(9439),c=n(4687),s=n.n(c),d=n(2791),f=n(697),m=n(2419),h=n(8471),x=n(503),g=n(7772),v=n(1598),p=n(168),w=n(8789).ZP.input(i||(i=(0,p.Z)(["\n  width: 100%;\n  height: 100%;\n  background: inherit;\n  border: none;\n  outline: none;\n"]))),Z=n(1973),y=n(5936),b=n(4265),j=n(4515),C=n(2181),k=n(4294),M=n(5003),R=n(4420),E=n(3338),N=function(e){return e.hero.items},P=n(3329),S=function(){var e=(0,R.I0)(),t=(0,R.v9)(N),n=(0,d.useState)([]),i=(0,u.Z)(n,2),c=i[0],p=i[1],S=(0,d.useState)({}),A=(0,u.Z)(S,2),F=A[0],D=A[1];(0,d.useEffect)((function(){var t=function(){var t=(0,l.Z)(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{e((0,E.cK)())}catch(n){console.log("error",n.message)}case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e]),(0,d.useEffect)((function(){if(t){var e=t.map((function(e){return{id:e._id,image:e.image,text:e.text}}));p(e)}}),[t]);var _=function(t){return function(){e((0,E.XS)(t))}},I=function(e){return function(){D((0,a.Z)((0,a.Z)({},F),{},(0,r.Z)({},e,{mode:y.se.View,ignoreModifications:!0})))}},V=function(e){return function(){D((0,a.Z)((0,a.Z)({},F),{},(0,r.Z)({},e,{mode:y.se.Edit})))}},H=(0,d.useState)(""),T=(0,u.Z)(H,2),U=T[0],W=T[1],z=(0,d.useState)(""),K=(0,u.Z)(z,2),L=K[0],O=K[1],X=function(e){return function(t){t.preventDefault();var n=t.target.files[0];if(n){var i=new FileReader;i.onloadend=function(){W((0,r.Z)({},e,{url:i.result,file:n}))},i.readAsDataURL(n)}}},q=function(t){return function(){var n;D((0,a.Z)((0,a.Z)({},F),{},(0,r.Z)({},t,{mode:y.se.View})));var i,o=c.find((function(e){return!0===e.isNew&&""===e.text})),l=new FormData;null!==(n=U[t])&&void 0!==n&&n.file&&(console.log(null===(i=U[t])||void 0===i?void 0:i.file),l.append("image",U[t].file));l.append("text",L[t]||c.find((function(e){return e.id===t})).text);try{o?(console.log("newRow",o),e((0,E.gM)(l))):e((0,E.Ww)({id:t,formData:l}))}catch(u){console.error("jopa",u.message)}}},B=function(e){return function(t){var n=t.target.value;O((function(t){return(0,a.Z)((0,a.Z)({},t),{},(0,r.Z)({},e,n))}))}},G=[{field:"image",headerName:"Image",type:"image",renderCell:function(e){var t,n,i=e.row.id,o=(null===(t=U[i])||void 0===t?void 0:t.url)||e.value,r=(null===(n=F[i])||void 0===n?void 0:n.mode)===y.se.Edit;return(0,P.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:5,objectFit:"contain",margin:0},children:[(0,P.jsx)("img",{src:o,alt:"Preview",style:{maxWidth:"200px",height:100}}),(0,P.jsx)("input",{type:"file",accept:"image/*",onChange:X(i),style:{display:r?"inline-block":"none"}})]})},width:500,align:"center",headerAlign:"center",editable:!1},{field:"text",headerName:"Text",type:"text",width:670,align:"center",headerAlign:"center",editable:!1,renderCell:function(e){var t,n=e.row.id;return(null===(t=F[n])||void 0===t?void 0:t.mode)===y.se.Edit?(0,P.jsx)(w,{type:"text",defaultValue:e.value,onChange:B(n)}):e.value}},{field:"actions",type:"actions",width:100,align:"center",headerAlign:"center",headerName:"Actions",cellClassName:"actions",getActions:function(e){var t,n=e.id;return(null===(t=F[n])||void 0===t?void 0:t.mode)===y.se.Edit?[(0,P.jsx)(j.u,{icon:(0,P.jsx)(g.Z,{}),label:"Save",sx:{color:"primary.main"},onClick:q(n)}),(0,P.jsx)(j.u,{icon:(0,P.jsx)(v.Z,{}),label:"Cancel",className:"textPrimary",onClick:I(n),color:"inherit"})]:[(0,P.jsx)(j.u,{icon:(0,P.jsx)(h.Z,{}),label:"Edit",className:"textPrimary",onClick:V(n),color:"inherit"}),(0,P.jsx)(j.u,{icon:(0,P.jsx)(x.Z,{}),label:"Delete",onClick:_(n),color:"inherit"})]}}];return(0,P.jsx)(f.Z,{sx:{height:"auto",width:"100%","& .actions":{color:"text.primary"},"& .textPrimary":{color:"text.primary"}},children:(0,P.jsx)(C._,{rows:c,columns:G,editMode:"row",rowModesModel:F,onRowModesModelChange:function(e){D(e)},onRowEditStop:function(e,t){e.reason===Z.U.rowFocusOut&&(t.defaultMuiPrevented=!0)},disableColumnMenu:!0,disableColumnResize:!0,disableColumnSorting:!0,hideFooter:!0,hideFooterPagination:!0,rowHeight:100,autoHeight:!0,slots:{toolbar:function(e){var t=e.setRows,n=e.setRowModesModel;return(0,P.jsx)(b.D,{children:(0,P.jsx)(k.Z,{color:"primary",startIcon:(0,P.jsx)(m.Z,{}),onClick:function(){var e=(0,M.kb)();t((function(t){return[].concat((0,o.Z)(t),[{id:e,image:"",text:"",isNew:!0}])})),n((function(t){return(0,a.Z)((0,a.Z)({},t),{},(0,r.Z)({},e,{mode:y.se.Edit,fieldToFocus:"text"}))}))},children:"Add record"})})}},slotProps:{toolbar:{setRows:p,setRowModesModel:D}}})})},A=function(){return(0,P.jsx)(S,{})}}}]);
//# sourceMappingURL=630.312dc1b9.chunk.js.map